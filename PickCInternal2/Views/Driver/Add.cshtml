@model PickC.Internal2.ViewModals.DriverVm
@{
    ViewBag.Title = "Add";
    Model.driver.DateOfBirth = DateTime.Now;

    var addressList = new List<Master.Contract.Address>();
    Model.driver.AddressList = addressList;
}
@section seccss{
    <link href="@Url.Content("~/Css/bootstrap-datetimepicker.css")" rel="stylesheet" />
<link href="@Url.Content("~/Css/file-upload.css")" rel="stylesheet" />
}
<section class="content-header">
    @*<div class="row">
            <div class="col-xs-12">
                @{ Html.RenderPartial("DashboardMenuList"); }
            </div>
        </div>*@
    <h3>Add Driver</h3>
</section>
@using (Html.BeginForm("SaveDriver", "Driver", FormMethod.Post, new { id = "frmDriverAdd", name = "frmDriverAdd", enctype = "multipart/form-data" }))
{
<section class="content">
    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Operator Info</h3>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Operator</label>
                                @*  <input type="text" id="txt-Operator-Number" class="form-control" />*@
                                @Html.DropDownListFor(x => x.driver.OperatorId, new SelectList(ViewBag.Operators, "Value", "Text"), "Select Operator", new { @class = "form-control", id = "txt-Operator-Number", onchange = "onChangeOperator(this.value)" })



                            </div>
                        </div>
                        @*<div class="col-md-4">
                                <button type="button" class="btn btn-primary" style="margin-top: 25px;" onclick="Check();">Valid</button>
                            </div>*@
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" id="DriverInfo" style="display:none;">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Driver Info</h3>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Driver ID</label>
                                @Html.TextBoxFor(x => x.driver.DriverId, new { @class = "form-control", placeholder = "Driver ID", @readonly = "readonly" })
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Driver Name</label>
                                @Html.TextBoxFor(x => x.driver.DriverName, new { @class = "form-control alphaonly", placeholder = "Driver Name" })
                            </div>
                        </div>


                        @{

                            var profilepicStr1 = "";
                            if (Model.driver != null && Model.driver.driverAttachment != null && Model.driver.driverAttachment.Count > 0)
                            {


                                var fprofilepicObj = Model.driver.driverAttachment
                                                  .Where(x => x.LookupCode == "1506")
                                                  .FirstOrDefault();

                                if (fprofilepicObj != null)
                                {
                                    profilepicStr1 = fprofilepicObj.ImagePath;
                                }
                            }
                        }
                        <div class="col-md-4">
                            <div class="col-md-2">
                                <div>
                                    <img src="@Url.Content("~/DriverAttachments/" + Model.driver.DriverId + "/" +profilepicStr1)" class="img-circle" style="width:50px;height:50px" />
                                </div>
                                </div>

                                @*<div class="col-md-3">
                <label>PROFILE PIC</label>
            </div>*@
                                <div class="col-md-10">
                                    <div class="file-upload pull-left" style="margin-top:10px;">
                                        <div class="file-select">
                                            <div class="file-select-button" id="fileName">Upload Profile Pic</div>
                                            <input type="file"
                                                   id="fprofilepic"
                                                   name="fprofilepic"
                                                   value="1506"
                                                   title="@profilepicStr1"
                                                   onchange="onFileChange(this, 'fprofilepicdocFile','hdnfprofilepicdocFile')" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div id="fprofilepicdocFile">
                                        @profilepicStr1
                                        @*<span  class="label label-default" onclick="onClickEvent('@profilepicStr')"><i class="fa fa-remove" style="font-size:12px" aria-hidden="true">@profilepicStr</i></span>*@
                                    </div>

                                </div>
                            </div>

                            @*@if (!string.IsNullOrWhiteSpace(profilepicStr1))
            {
                <div class="col-md-3">
                    <a href="@Url.Content($"~/DriverAttachments/" + Model.driver.DriverId + "/" + profilepicStr1)" target="_blank" download="@profilepicStr1">download</a>
                </div>
            }*@



                        @*<div class="col-md-4">
                                <div class="form-group">
                                    <label>Vehicle No</label>
                                    @Html.TextBoxFor(x => x.driver.VehicleNo, new { @class = "form-control", placeholder = "Vehicle No" })
                                </div>
                            </div>*@
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" style="display:none;" id="PersonalInfo">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Personal Info</h3>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Father Name</label>
                                @Html.TextBoxFor(x => x.driver.FatherName, new { @class = "form-control alphaonly", placeholder = "Father Name" })
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Date Of Birth</label>
                                <div class="input-group dtCssdb">
                                    @Html.TextBoxFor(x => x.driver.DateOfBirth, "{0:dd/MM/yyyy}", new {@class = "form-control",placeholder = "Date Of Birth"})
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default"><i class="fa fa-calendar" aria-hidden="true"></i></button>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Place Of Birth</label>
                                @Html.TextBoxFor(x => x.driver.PlaceOfBirth,new{@class = "form-control alphaonly", placeholder = "Place Of Birth"})
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Gender</label>
                                @Html.DropDownListFor(x => x.driver.Gender,
                                                new SelectList(Model.driverLookupDTO.genderOptions, "LookupId", "LookupDescription"),
                                                "Select Gender",
                                                new { @class = "form-control" })
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Marital Status</label>
                                @Html.DropDownListFor(x => x.driver.MaritialStatus,
                                                new SelectList(Model.driverLookupDTO.maritalOptions, "LookupId", "LookupDescription"),
                                                "Select Marital Status",
                                                new { @class = "form-control" })
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Mobile No</label>
                                @Html.TextBoxFor(x => x.driver.MobileNo, new { @class = "form-control number MobileNoCss", @maxlength = 10, placeholder = "Mobile No" , onblur = "appendMobileno(this)" })
                                <label id="mobileerror">MobileNo is Already Exists.Please enter another one</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Phone No</label>
                                @Html.TextBoxFor(x => x.driver.PhoneNo, new { @class = "form-control number", @maxlength = 10, placeholder = "Phone No",@minlength=10 })
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" style="display:none;" id="IdentificationInfo">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Identification Info</h3>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>PAN No</label>
                                @Html.TextBoxFor(x => x.driver.PANNo, new { @class = "form-control noSpecialChar", @maxlength = 10, placeholder = "PAN No" , onblur = "appendPanno(this)" })
                                <label id="panerror">PanNo is Already Exists.Please enter another one</label>
                              </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Aadhar Card No</label>
                                @Html.TextBoxFor(x => x.driver.AadharCardNo, new { @class = "form-control number", @maxlength = 12, placeholder = "Aadhar Card No" , onblur = "appendAadharno(this)" })
                                <label id="aadharerror">AadharNo is Already Exists.Please enter another one</label>
                              </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Driving Licence No</label>
                                @Html.TextBoxFor(x => x.driver.LicenseNo, new { @class = "form-control noSpecialChar", @maxlength = 16, placeholder = "Driving Licence No" })
                            </div>
                        </div>
                    </div>
                    @*<div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label>Vehicle No</label>
                                    @Html.TextBoxFor(x => x.driver.DriverVehicleNo, new { @class = "form-control" })
                                </div>
                            </div>
                        </div>*@
                </div>
            </div>
        </div>
    </div>
    <div id="DeviceDetails" class="row" style="display:none;">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Device Details</h3>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Mobile Make</label>
                                @Html.TextBoxFor(x => x.driver.MobileMake, new
                           {
                               @class = "form-control validatename",
                               placeholder = "Mobile Make",
                               
                           })
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Model No</label>
                                @Html.TextBoxFor(x => x.driver.ModelNo, new
                           {
                               @class = "form-control",
                               placeholder = "Model No"
                           })
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Date of Issue</label>
                                <div class="input-group dtCss">
                                    @Html.TextBoxFor(x => x.driver.DateofIssue, "{0:dd/MM/yyyy}",
                                                    new
                                                    {
                                                        @class = "form-control",
                                                        placeholder = "Date Of Issue"
                                                    })
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default"><i class="fa fa-calendar" aria-hidden="true"></i></button>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Date of Return</label>
                                <div class="input-group dtCss">
                                    @Html.TextBoxFor(x => x.driver.DateofReturn, "{0:dd/MM/yyyy}",
                                                    new
                                                    {
                                                        @class = "form-control",
                                                        placeholder = "Date Of Return"
                                                    })
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default"><i class="fa fa-calendar" aria-hidden="true"></i></button>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Device Remarks</label>
                                @Html.TextBoxFor(x => x.driver.DeviceRemarks, new { @class = "form-control validatename", placeholder = "Device Remarks" })
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <div class="row" style="display:none;" id="AddressInfo">
        <div class="col-md-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Address Info</h3>
                    <div class="box-tools">
                        <button class="btn btn-box-tool" type="button" onclick="AddAddress('-1')"><i class="fa fa-plus" aria-hidden="true"></i></button>
                    </div>
                </div>
                <div class="box-body" style="padding-bottom:15px;">

                    <table class="table table-hover table-bordered">
                        <thead>
                            <tr>
                                <th>Address </th>
                                @*<th>Address 2</th>*@
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="trBody">
                            @for (var i = 0; i < Model.driver.AddressList.Count; i++)
                            {
                                <tr id="trRow_@i" class="trRowCss">
                                    <td>
                                        @*<span id="Address1_span_@i">@Model.driver.AddressList[i].Address1</span>
                                        @Html.HiddenFor(x => Model.driver.AddressList[i].Address1)*@

                                        <span id="Address1_span_@i">@Model.driver.AddressList[i].Address1</span>,<br />
                                        @Html.HiddenFor(x => Model.driver.AddressList[i].Address1)
                                        <span id="Address2_span_@i">
                                            @Model.driver.AddressList[i].Address2
                                        </span>,<br />
                                                                    @Html.HiddenFor(x => Model.driver.AddressList[i].Address2)
                                                                    <span id="Address3_span_@i">
                                                                        @Model.driver.AddressList[i].Address3
                                                                    </span>,<br />
                                                                    @Html.HiddenFor(x => Model.driver.AddressList[i].Address3)
                                                                    <span id="Address4_span_@i">
                                                                        @Model.driver.AddressList[i].Address4
                                                                    </span>,<br />
                                                                    @Html.HiddenFor(x => Model.driver.AddressList[i].Address4)
                                                                    <span id="CityName_span_@i">
                                                                        @Model.driver.AddressList[i].CityName
                                                                    </span>,<br />
                                                                    @Html.HiddenFor(x => Model.driver.AddressList[i].CityName)
                                                                    <span id="StateName_span_@i">
                                                                        @Model.driver.AddressList[i].StateName
                                                                    </span>,<br />
                                                                    @Html.HiddenFor(x => Model.driver.AddressList[i].StateName)
                                                                    <span id="ZipCode_span_@i">
                                                                        @Model.driver.AddressList[i].ZipCode
                                                                    </span>.<br />
                                                                    @Html.HiddenFor(x => Model.driver.AddressList[i].ZipCode)

                                    </td>
                                    @*<td>
                                        <span id="Address2_span_@i">
                                            @Model.driver.AddressList[i].Address2
                                        </span>
                                        @Html.HiddenFor(x => Model.driver.AddressList[i].Address2)
                                    </td>*@
                                    <td>
                                        @*@Html.HiddenFor(x => Model.driver.AddressList[i].Address3)
                                        @Html.HiddenFor(x => Model.driver.AddressList[i].Address4)
                                        @Html.HiddenFor(x => Model.driver.AddressList[i].CityName)
                                        @Html.HiddenFor(x => Model.driver.AddressList[i].StateName)
                                        @Html.HiddenFor(x => Model.driver.AddressList[i].ZipCode)*@
                                        @Html.HiddenFor(x => Model.driver.AddressList[i].AddressLinkId)
                                        @Html.HiddenFor(x => Model.driver.AddressList[i].AddressId)
                                        <a class="hand" onclick="EditAddress('@i')">Edit</a>&nbsp;|&nbsp;
                                        <a class="hand" onclick="DeleteAddress('@i')">Delete</a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>

                </div>
            </div>
        </div>
    </div>
 
    @*<div class="row" style="display:none;" id="Attachments">
        <div class="col-md-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Attachments</h3>
                    @*<div class="box-tools">
                    <button class="btn btn-box-tool" type="button" onclick="AddAttachments()"><i class="fa fa-plus" aria-hidden="true"></i></button>
                </div>*@
                @*</div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-3">
                            <label>AADHAR CARD</label>
                        </div>
                        <div class="col-md-3">
                            <input type="file" id="fadhar" name="fadhar" value="1375" />
                        </div>
                    </div>
                    <div class="row" style="padding-top:5px">
                        <div class="col-md-3">
                            <label>PAN CARD</label>
                        </div>
                        <div class="col-md-3">
                            <input type="file" id="fpan" name="fpan" value="1374" />
                        </div>
                    </div>
                    <div class="row" style="padding-top:5px">
                        <div class="col-md-3">
                            <label>DRIVING LICENCE</label>
                        </div>
                        <div class="col-md-3">
                            <input type="file" id="flicense" name="flicense" value="1376" />
                        </div>
                    </div>
                    <div class="row" style="padding-top:5px">
                        <div class="col-md-3">
                            <label>VOTER ID</label>
                        </div>
                        <div class="col-md-3">
                            <input type="file" id="fvoter" name="fvoter" value="1377" />
                        </div>
                    </div>
                    <div class="row" style="padding-top:5px">
                        <div class="col-md-3">
                            <label>PROFILE PICTURE</label>
                        </div>
                        <div class="col-md-3">
                            <input type="file" id="fvoter" name="fprofilepic" value="1506" />
                        </div>
                    </div>
                    <div class="row" style="padding-top:5px">
                        <div class="col-md-3">
                            <label>OTHERS</label>
                        </div>
                        <div class="col-md-3">
                            <input type="file" id="fothers" name="fothers" value="1382" multiple="multiple" />*@
                            @*@Html.TextBoxFor(model => model.files, "", new { @type = "file", @multiple = "multiple" })*@
                        @*</div>
                    </div>*@
                    @*<div class="row">
                    <div class="col-md-2">
                        <label>PHOTO</label>
                    </div>
                    <div class="col-md-3">
                        <input type="file" id="fphoto" name="fphoto" value="1385" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>DRIVING LICENSE</label>
                    </div>
                    <div class="col-md-3">
                        <input type="file" id="flicense" name="flicense" value="1386" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>PAN CARD</label>
                    </div>
                    <div class="col-md-3">
                        <input type="file" id="fpan" name="fpan" value="1387" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>AADHAR CARD</label>
                    </div>
                    <div class="col-md-3">
                        <input type="file" id="fadhaar" name="fadhaar" value="1388" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>ADDRESS PROOF</label>
                    </div>
                    <div class="col-md-3">
                        <input type="file" id="faddressProof" name="faddressProof" value="1389" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-2">
                        <label>OTHERS</label>
                    </div>
                    <div class="col-md-3">
                        <input type="file" id="fothers" name="fothers" value="1390" multiple="multiple" />
                    </div>
                </div>*@

                @*</div>
            </div>*@
            <div class="row" id="BankDetails" style="display:none;">
                <div class="col-md-12">
                    <div class="box">
                        <div class="box-header">
                            <h3 class="box-title">Bank Details</h3>
                            <div class="box-tools">
                                <button class="btn btn-box-tool" type="button" onclick="bankDetails('-1')"><i class="fa fa-plus" aria-hidden="true"></i></button>
                            </div>
                        </div>
                        <div class="box-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <table class="table table-hover table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Bank Name</th>
                                                <th>Branch</th>
                                                <th>Account Number</th>
                                                <th>Account Type</th>
                                                <th>IFSC</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody id="trBodyBank">
                                            @if (Model.driver.BankDetails != null)
                                    {
                                        for (var i = 0; i < Model.driver.BankDetails.Count; i++)
                                        {
                                            <tr id="trRow_Bank_@i" class="trRowCss">
                                                <td>
                                                    <span id="txtBankName_span_@i">@Model.driver.BankDetails[i].BankName</span>
                                                    @Html.HiddenFor(x => Model.driver.BankDetails[i].BankName)
                                                    @Html.HiddenFor(x => Model.driver.BankDetails[i].OperatorBankID)
                                                </td>
                                                <td>
                                                    <span id="txtBranch_span_@i">@Model.driver.BankDetails[i].Branch</span>
                                                    @Html.HiddenFor(x => Model.driver.BankDetails[i].Branch)
                                                </td>
                                                <td>
                                                    <span id="txtAccNumber_span_@i">@Model.driver.BankDetails[i].AccountNumber</span>
                                                    @Html.HiddenFor(x => Model.driver.BankDetails[i].AccountNumber)
                                                </td>
                                                <td>
                                                    <span id="txtAccType_span_@i">@Model.driver.BankDetails[i].AccountType</span>
                                                    @Html.HiddenFor(x => Model.driver.BankDetails[i].AccountType)
                                                </td>

                                                <td>
                                                    <span id="txtIFSCcode_span_@i">@Model.driver.BankDetails[i].IFSC</span>
                                                    @Html.HiddenFor(x => Model.driver.BankDetails[i].IFSC)
                                                </td>

                                                <td>
                                                    <a class="hand" onclick="EditBankDetails('@i')">Edit</a>&nbsp;|&nbsp;
                                                    <a class="hand" onclick="DeleteBankDetails('@i')">Delete</a>
                                                </td>
                                            </tr>
                                }
                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

    <div class="row" style="display:none;" id="Attachments">
        <div class="col-md-6">
            @*<h5>Attachments</h5>*@
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Attachments</h3>
                </div>
                <div class="box-body">
                    @*<div class="row">
                            <div class="col-md-3">
                                <label>AADHAR CARD</label>
                            </div>
                            <div class="col-md-3">
                                <input type="file" id="fadhar" name="fadhar" value="1375" />
                            </div>
                        </div>*@
                    @{
                        var adharStr = "";
                        var panStr = "";
                        var licenseStr = "";
                        var voterStr = "";
                        var profilepicStr = "";
                        if (Model.driver.driverAttachment != null && Model.driver.driverAttachment.Count > 0)
                        {

                            var fadharObj = Model.driver.driverAttachment
                                              .Where(x => x.LookupCode == "1375")
                                              .FirstOrDefault();

                            if (fadharObj != null)
                            {
                                adharStr = fadharObj.ImagePath;
                            }


                            var fpanObj = Model.driver.driverAttachment
                                              .Where(x => x.LookupCode == "1374")
                                              .FirstOrDefault();

                            if (fpanObj != null)
                            {
                                panStr = fpanObj.ImagePath;
                            }


                            var flicenseObj = Model.driver.driverAttachment
                                              .Where(x => x.LookupCode == "1376")
                                              .FirstOrDefault();

                            if (flicenseObj != null)
                            {
                                licenseStr = flicenseObj.ImagePath;
                            }


                            var fvoterObj = Model.driver.driverAttachment
                                              .Where(x => x.LookupCode == "1377")
                                              .FirstOrDefault();

                            if (fvoterObj != null)
                            {
                                voterStr = fvoterObj.ImagePath;
                            }


                            var fprofilepicObj = Model.driver.driverAttachment
                                              .Where(x => x.LookupCode == "1506")
                                              .FirstOrDefault();

                            if (fprofilepicObj != null)
                            {
                                profilepicStr = fprofilepicObj.ImagePath;
                            }
                        }
                    }
                    <div class="row">
                        <div class="col-md-3">
                            <label>AADHAR CARD</label>
                        </div>
                        <div class="col-md-3">
                            <div class="file-upload">
                                <div class="file-select">
                                    <div class="file-select-button" id="fileName">Choose File</div>
                                    <input type="file"
                                           id="fadhar"
                                           name="fadhar"
                                           value="1375"
                                           title="@adharStr"
                                           onchange="onFileChange(this, 'fadhardocFile','hdnfadhardocFile')" />
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div id="fadhardocFile">@adharStr</div>
                            <input type="hidden" name="hdnfadhardocFile" id="hdnfadhardocFile" />
                        </div>

                        @*<div class="col-md-3">
                            <a href="@Url.Content($"~/Attachments/"+Model.driver.DriverId+"/" + adharStr )" target="_blank" download="@adharStr">download</a>
                        </div>*@ 

                    </div>
                    <div class="row" style="padding-top:5px">
                        <div class="col-md-3">
                            <label>PAN CARD</label>
                        </div>
                        <div class="col-md-3">
                            <div class="file-upload">
                                <div class="file-select">
                                    <div class="file-select-button" id="fileName">Choose File</div>
                                    <input type="file"
                                           id="fpan"
                                           name="fpan"
                                           value="1374"
                                           title="@panStr"
                                           onchange="onFileChange(this, 'fpandocFile','hdnfpandocFile')" />
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div id="fpandocFile">@panStr</div>
                            <input type="hidden" name="hdnfpandocFile" id="hdnfpandocFile" />
                        </div>
                    </div>
                    <div class="row" style="padding-top:5px">
                        <div class="col-md-3">
                            <label>DRIVING LICENCE</label>
                        </div>
                        <div class="col-md-3">

                            <div class="file-upload">
                                <div class="file-select">
                                    <div class="file-select-button" id="fileName">Choose File</div>
                                    <input type="file"
                                           id="flicense"
                                           name="flicense"
                                           value="1376"
                                           title="@licenseStr"
                                           onchange="onFileChange(this, 'flicensedocFile','hdnflicensedocFile')" />
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div id="flicensedocFile">@licenseStr</div>
                            <input type="hidden" name="hdnflicensedocFile" id="hdnflicensedocFile" />
                        </div>
                    </div>
                    <div class="row" style="padding-top:5px">
                        <div class="col-md-3">
                            <label>VOTER ID</label>
                        </div>
                        <div class="col-md-3">
                            <div class="file-upload">
                                <div class="file-select">
                                    <div class="file-select-button" id="fileName">Choose File</div>
                                    <input type="file"
                                           id="fvoter"
                                           name="fvoter"
                                           value="1377"
                                           title="@voterStr"
                                           onchange="onFileChange(this, 'fvoterdocFile','hdnfvoterdocFile')" />
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div id="fvoterdocFile">@voterStr</div>
                            <input type="hidden" name="hdnfvoterdocFile" id="hdnfvoterdocFile" />
                        </div>
                    </div>
                    @*<div class="row" style="padding-top:5px">
                        <div class="col-md-3">
                            <label>PROFILE PIC</label>
                        </div>
                        <div class="col-md-3">
                            <div class="file-upload">
                                <div class="file-select">
                                    <div class="file-select-button" id="fileName">Choose File</div>
                                    <input type="file"
                                           id="fprofilepic"
                                           name="fprofilepic"
                                           value="1506"
                                           title="@profilepicStr"
                                           onchange="onFileChange(this, 'fprofilepicdocFile','hdnfprofilepicdocFile')" />
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div id="fprofilepicdocFile">@profilepicStr</div>
                            <input type="hidden" name="hdnfprofilepicdocFile" id="hdnfprofilepicdocFile" />
                        </div>
                    </div>*@
                    <div class="row" style="padding-top:5px">
                        <div class="col-md-3">
                            <label>OTHERS</label>
                        </div>
                        <div class="col-md-3">
                            <input type="file" id="fothers" name="fothers" value="1382" multiple="multiple" />
                            @*@Html.TextBoxFor(model => model.files, "", new { @type = "file", @multiple = "multiple" })*@
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>

            <div class="row" style="display:none; " id="buttons">
                <div class="col-md-12">
                    <div class="box">
                        <div class="box-body" style="padding-bottom:15px;">
                            <div class="text-left">
                                <button class="btn btn-primary btn-them" type="button" onclick="btnSave()">Save</button>
                                @*<button type="button" class="btn btn-primary btn-them" onclick="btnSave();">Save</button>*@
                              
                                <button type="button" class="btn btn-default " onclick="OnCancel();">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        @*</div>
    </div>*@
    
</section>

}
<div class="modal" id="addressModal">
    <div class="modal-dialog modal-md">
        <form id="frmAddress" name="frmAddress">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    <h4 class="modal-title">Address Info</h4>
                </div>
                <div class="modal-body" id="addressModalBody">
                    <div class="row">
                        <div class="col-md-6">
                            <label>Address 1</label>
                            <input class="form-control" id="Address1" name="Address1" type="text" value="">
                        </div>
                        <div class="col-md-6">
                            <label>Address 2</label>
                            <input class="form-control" id="Address2" name="Address2" type="text" value="">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label>Address 3</label>
                            <input class="form-control" id="Address3" name="Address3" type="text" value="">
                        </div>
                        <div class="col-md-6">
                            <label>Address 4</label>
                            <input class="form-control" id="Address4" name="Address4" type="text" value="">
                        </div>
                    </div>
                    <div class="row">

                        <div class="col-md-6">
                            <label>City</label>
                            <input class="form-control" id="CityName" name="CityName" type="text" value="">
                        </div>

                        <div class="col-md-6">
                            <label>State</label>
                            <input class="form-control" id="StateName" name="StateName" type="text" value="">
                        </div>
                       
                        <input id="AddressLinkId" name="AddressLinkId" type="hidden" value="">
                        <input id="AddressId" name="AddressId" type="hidden" value="">
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label>Zipcode</label>
                            <input class="form-control number" id="ZipCode" name="ZipCode" type="text" value="" maxlength=6>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                    <button type="button" onclick="btnSaveAddress();" class="btn btn-primary btn-them">Save</button>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="modal" id="bankDetailsModal">
    <div class="modal-dialog modal-md">
        <form id="frmBank" name="frmBank">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" id="bank_cancel" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    <h4 class="modal-title">Bank Details</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <label>Bank Name</label>
                            <input type="text" id="txtBankName" name="txtBankName" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label>Branch</label>
                            <input type="text" id="txtBranch" name="txtBranch" class="form-control" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label>Account Number</label>
                            <input type="text" id="txtAccNumber" name="txtAccNumber" class="form-control number" maxlength="20" onblur = "appendAccountno(this)"/>
                            <label id="accountnoerror">Account no is Already Exists.Please enter another one</label>
                         </div>
                        <div class="col-md-6">
                            <label>Account Type</label>
                            @*<input type="text" id="txtAccType" name="txtAccType" class="form-control" />*@
                            <select id="txtAccType" name="txtAccType" class="form-control noSpecialChar" >
                                <option value="savings">savings</option>
                                <option value="current">current</option>

                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <label>IFSC Code</label>
                            <input type="text" id="txtIFSCcode" name="txtIFSCcode" class="form-control" maxlength="20" />
                        </div>
                    </div>
                    
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal" id="bank_cancel">Close</button>
                    <button id="btnSave" type="button" class="btn btn-primary btn-them " onclick="btnSaveBank();">Save</button>
                </div>
            </div>
        </form>
    </div>
</div>
@section secscripts{
    <script src="@Url.Content("~/Scripts/jquery.validate.js")"></script>
    <script src="@Url.Content("~/Scripts/moment.js")"></script>
    <script src="@Url.Content("~/Scripts/bootstrap-datetimepicker.js")"></script>
    <script src="@Url.Content("~/Scripts/Internal/DriverAddress.js")"></script>
    @*<script src="@Url.Content("~/Scripts/Internal/DriverAddress.js")"></script>*@
    <script src="@Url.Content("~/Scripts/Internal/DriverBankDetails.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.cookie.js")"></script>
    <script type="text/javascript">

        $('#panerror').hide();
        function appendPanno(el) {
            debugger;
              var pannno = $('#driver_PANNo').val();
              var length = pannno.length;
              if (length > 0) {
                  $.ajax({
                      url: '@Url.Content("~/Driver/IsPannoExists?Panno=")' + pannno,
                      method: 'get',
                      contentType: 'Json',
                      success: function (result) {
                          if (result > 0) {
                              $('#panerror').show();
                              $('#driver_PANNo').val('');
                              $('#panerror').fadeOut(5000);
                          }
                          else {
                              $('#panerror').hide();

                          }
                      },
                      error: function (err) {
                          return result;
                      }

                  });
              }
              else {
                  return null;
              }
          }

        $('#mobileerror').hide();
        function appendMobileno(el) {
            debugger;
            var mobilenono = $('#driver_MobileNo').val();
            var length = mobilenono.length;
            if (length > 0) {
                $.ajax({
                    url: '@Url.Content("~/Driver/IsMobilenoExists?mobilenono=")' + $('#driver_MobileNo').val(),
                    method: 'get',
                    contentType: 'Json',
                    success: function (result) {
                        if (result > 0) {
                            $('#mobileerror').show();
                            $('#driver_MobileNo').val('');
                            $('#mobileerror').fadeOut(5000);
                        }
                        else {
                            $('#mobileerror').hide();

                        }
                    },
                    error: function (err) {
                        return result;
                    }

                });
            }
            else {
                return null;
            }
        }

        $('#aadharerror').hide();
        function appendAadharno(el) {
            debugger;
            var aadharno = $('#driver_AadharCardNo').val();
            var length = aadharno.length;
            if (length > 0) {
                $.ajax({
                    url: '@Url.Content("~/Driver/IsAadharExists?aadharno=")' + aadharno,
                    method: 'get',
                    contentType: 'Json',
                    success: function (result) {
                        if (result > 0) {
                            $('#aadharerror').show();
                            $('#driver_AadharCardNo').val('');
                            $('#aadharerror').fadeOut(5000);
                        }
                        else {
                            $('#aadharerror').hide();

                        }
                    },
                    error: function (err) {
                        return result;
                    }

                });
            }
            else {
                return null;
            }
        }

        $('#accountnoerror').hide();
        function appendAccountno(el) {
            debugger;
            var accountno = $('#txtAccNumber').val();
            var length = accountno.length;
            if (length > 0) {
                $.ajax({
                    url: '@Url.Content("~/Driver/IsAccountnoExists?accountno=")' + $('#txtAccNumber').val(),
                    method: 'get',
                    contentType: 'Json',
                    success: function (result) {
                        if (result > 0) {
                            $('#accountnoerror').show();
                            $('#txtAccNumber').val('');
                            $('#accountnoerror').fadeOut(5000);
                        }
                        else {
                            $('#accountnoerror').hide();

                        }
                    },
                    error: function (err) {
                        return result;
                    }

                });
            }
            else {
                return null;
            }
        }




        $.validator.addMethod('MobileNoCss', function (value) {
            var test = /^[789]\d{9}$/.test(value);
            return /^[789]\d{9}$/.test(value);
        }, 'Please enter correct Mobile Number');


        function onFileChange(el, id, hdn) {
            debugger;
            $('#' + id).text(el.files[0].name);
            $('#' + hdn).val(el.files[0].name);
        }

        $(function () {
            // var date1 = new Date();
            var date1 = new Date();

            day = date1.getDate(),
            month = date1.getMonth() + 1,
            year = date1.getFullYear() - 18;
            var mindate = '-' + year + '/' + month + '/' + day
            $('.dtCssdb').datetimepicker({
                icons: {
                    time: 'fa fa-clock-o',
                    date: 'fa fa-calendar',
                    up: 'fa fa-arrow-up',
                    down: 'fa fa-arrow-down',
                    previous: 'fa fa-arrow-left',
                    next: 'fa fa-arrow-right'
                },
                format: DateFormat,
                maxDate: mindate
            });

            $('.dtCss').datetimepicker({
                icons: {
                    time: 'fa fa-clock-o',
                    date: 'fa fa-calendar',
                    up: 'fa fa-arrow-up',
                    down: 'fa fa-arrow-down',
                    previous: 'fa fa-arrow-left',
                    next: 'fa fa-arrow-right'
                },
                format: DateFormat,
                maxDate: date1
            });
            @if(Model.driver.DriverId==null)
             {
                 <text>  $('#driver_DateOfBirth').val('');</text>
             }
            $('#frmDriverAdd').validate({
                rules: {
                    'driver.DriverName': {
                        required: true
                    },
                    'driver.VehicleNo': {
                        required: true
                    },
                    'driver.FatherName': {
                        required: true
                    },
                    'driver.DateOfBirth': {
                        required: true
                    },
                    'driver.PlaceOfBirth': {
                        required: true
                    },
                    'driver.Gender': {
                        required: true
                    },
                    'driver.MaritialStatus': {
                        required: true
                    },
                    'driver.MobileNo': {
                        required: true,
                        minlength: 10
                    },

                    'driver.PANNo': {
                        required: true
                    },
                    'driver.AadharCardNo': {
                        required: true
                    },
                    'driver.LicenseNo': {
                        required: true
                    },
                    'driver.MobileMake': {
                        required: true
                    },
                    'driver.ModelNo': {
                        required: true
                    },
                    'driver.DateofIssue': {
                        required: true
                    },
                    'driver.DateofReturn': {
                        required: true
                    },
                    'driver.DeviceRemarks': {
                        required: true
                    }
                }
            });

        });


        function btnSave() {
            debugger
            if ($('#frmDriverAdd').valid()) {
                var addressLength = $('#trBody tr').length;
                var bankDetailslength = $('#trBodyBank tr').length;
                $("#txt-Operator-Number").removeAttr("disabled", "disabled");
                if (addressLength > 0 && bankDetailslength > 0) {
                    $('#frmDriverAdd').submit();
                }
                else {
                    if (addressLength == 0)
                        alert("Please enter address details");
                    else
                        alert("Please enter bank details");
                }
            }
            else {
                alert("please Enter Driver Information");
            }
        }

        $('.number').keypress(function (e) {
            if (window.event)
                code = e.keyCode;
            else
                code = e.which;
            if (code >= 48 && code <= 57)
                return true;
            else
                return false;
        });
        $('.validatename').keypress(function (e) {
            if (window.event)
                code = e.keyCode;
            else
                code = e.which;
            if (code == 32 || (code >= 97 && code <= 122) || (code >= 65 && code <= 90))
                return true;
            else
                return false;
        });

        function OnCancel() {
            debugger
            var op = '@ViewBag.PassedOperatorId';
            if (op != null && op != '') {
                location.href = "/Operator/Edit?operatorID=" + op;
            }
            else {
                location.href = "Driver/Driver";
            }

        }


        //function isValidCharacter(txtTitle) {
        //    var title = document.getElementById(txtTitle);
        //    var regExp = /^[a-zA-Z]*$/
        //    if (!regExp.test(title.value)) {
        //        title.value = '';
        //        return false;
        //    }
        //    else {
        //        return true;
        //    }
        //}
        function AddAddress(index) {
            $('#frmAddress input[type="text"]').removeClass('error');
            $('#Address1, #Address2, #Address3, #Address4, #StateName, #CityName, #ZipCode').val('');
            $('#addressModal').modal('show');
        }
        function bankDetails(index) {
            $('#frmBank input[type="text"]').removeClass('error');
            $('#txtBankName,#txtBranch,#txtAccNumber,#txtAccType').val('');
            $('#bankDetailsModal').modal('show');
        }

        @*$('.NoSpecialCharacter').keypress(function () {
            var format = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/;

            if (format.test(string)) {
                return true;
            } else {
                return false;
            }

        });*@
        // return string.match(/^[^a-zA-Z0-9]+$/) ? true : false;

        //debugger;
        //var values = localStorage.getItem('OperatorValue');
        //var value = JSON.parse(values);
        debugger;
        if ('@ViewBag.PassedOperatorId' != '') {
            onChangeOperator('@ViewBag.PassedOperatorId');
        }
        function onChangeOperator(val) {
            debugger;
            var operatorId;
            if (val != null) {
                operatorId = val;
                $('#txt-Operator-Number').val(operatorId);
            }
            else {
                operatorId = $('#txt-Operator-Number').val();
            }
            if (operatorId != '' && operatorId != undefined) {

                $.ajax({
                    url: '@Url.Content("~/Dashboard/IsValidOperatorId?operatorId=")' + operatorId,
                    method: 'get',
                    contentType: 'application/json',
                    success: function (data) {
                        if (data == 1) {
                            //  alert("Valid!");
                            $("#DriverInfo").css("display", "block");
                            $("#IdentificationInfo").css("display", "block");
                            $("#PersonalInfo").css("display", "block")
                            $("#AddressInfo").css("display", "block");
                            $("#Attachments").css("display", "block");
                            $("#DeviceDetails").css("display", "block");
                            $("#BankDetails").css("display", "block");
                            $("#buttons").css("display", "block");

                            $("#txt-Operator-Number").attr("disabled", "disabled");
                        }

                        //$('.validatenumber').keypress(function (e) {

                        //    if (window.event)
                        //        code = x.driver.PhoneNo;
                        //    else
                        //        code = x.which;
                        //    if ((code >= 48 && code <= 57) || code == 43)
                        //        return true;
                        //    else
                        //        return false;

                        //});

                        //if (data = 0) {
                        //    alert("NotValid!");
                        //    $('#txt-Operator-Number').val('');
                        //}
                    },
                    error: function (err) {

                    }
                });
            }
        }
    </script>
}
<style>
    .input-sm {
        height: 35px;
        padding: 5px 10px;
        font-size: 14px;
        line-height: 1.5;
    }
</style>